<!doctype html>
<html lang="en"  class="dark-enabled">
	<head>
		<title></title>
		<meta charset="utf-8">
		<meta name="description" content="">
		<meta name="author" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="mobile-web-app-capable" content="yes">

		<link rel="stylesheet" href="/index.css" />
	</head>
	<body>
		<div id="editor">
			<div 
				class="section simulation editor"
				id="full-page-container"
			>
			</div>
		</div>
	</body>
	<script type="module">
		import Editor from './editor.js';
		import { trigger } from './Listeners.js';

		const isRunningAsModule = document.location.href.includes("_/modules");

		if(!isRunningAsModule){
			const base = document.createElement('base');
			base.href = '../../';
			document.getElementsByTagName('head')[0].appendChild(base);
		}

		const { inlineEditor: editor } = Editor();

		const state = {
			selected: {
				// line: 2, << causes focus to be stolen
				// column: 0, << causes focus to be stolen
				id: '1',
				name: 'index.html',
				filename: 'index.html',
				path: '../index.html',
			},
			opened: [{ name: '404.html', order: 1 }, { name: 'index.html', order: 0 }],
			changed: ['index.html']
		};

		editor(state.selected);

		const head=document.getElementsByTagName("head")[0];

		const cssnode = document.createElement('link');
		cssnode.type = 'text/css';
		cssnode.rel = 'stylesheet';
		cssnode.href = './editor.css';
		head.appendChild(cssnode);

		trigger({
			e: {},
			type: 'operationDone',
			params: {},
			source: {},
			data: {},
			detail: {
				op: 'read',
				id: 1,
				result: [{
					name: 'crosshj/fake',
					state
				}]
			}
		})

	</script>
</html>

